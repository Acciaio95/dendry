# Source this file from a bash shell:
# $ source activate
# This file is based on the Python virtualenv activate script.

deactivate () {
    # Reset old path.
    if [ -n "$_OLD_PATH" ] ; then
        PATH="$_OLD_PATH"
        export PATH
        unset _OLD_PATH
    fi

    if [ -n "$_OLD_PS1" ] ; then
        PS1="$_OLD_PS1"
        export PS1
        unset _OLD_PS1
    fi

    unset -f deactivate

    # This should detect bash and zsh, which have a hash command that must
    # be called to get it to forget past commands.  Without forgetting
    # past commands the $PATH changes we made may not be respected
    if [ -n "$BASH" -o -n "$ZSH_VERSION" ] ; then
        hash -r 2>/dev/null
    fi
}

# Configure the path
_OLD_PATH="$PATH"
PATH="`npm bin`:$PATH"
export PATH

# Configure the prompt to show we're in this environment
_OLD_PS1="$PS1"
if [ "x" != x ] ; then
    PS1="$PS1"
else
    PS1="(NODE)$PS1"
fi
export PS1

echo "Included NPM local binaries in path - deactivate to quit."

# This should detect bash and zsh, which have a hash command that must
# be called to get it to forget past commands.  Without forgetting
# past commands the $PATH changes we made may not be respected
if [ -n "$BASH" -o -n "$ZSH_VERSION" ] ; then
    hash -r 2>/dev/null
fi
